<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">ol{margin:0;padding:0}table td,table th{padding:0}.c0{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c6{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Arial";font-style:normal}.c13{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Verdana";font-style:normal}.c5{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Verdana";font-style:normal}.c3{padding-top:18pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c7{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:center}.c1{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c12{color:#000000;text-decoration:none;vertical-align:baseline;font-size:16pt;font-style:normal}.c9{text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline}.c15{background-color:#ffffff;margin:auto;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c4{color:inherit;text-decoration:inherit}.c14{font-weight:400;font-family:"Arial"}.c8{font-weight:400;font-family:"Verdana"}.c10{height:16pt}.c11{font-size:12pt}.c16{text-indent:36pt}.c2{height:11pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c15"><p class="c1"><span class="c6">Development Log #2</span></p><p class="c1"><span class="c6">Word Finder&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class="c1"><span class="c6">08 / 2019</span></p><p class="c1 c2"><span class="c6"></span></p><p class="c7"><span class="c9 c11"><a class="c4" href="#id.jettlvyfjohu">Game Breakdown</a></span></p><p class="c7"><span class="c9 c11"><a class="c4" href="#id.2g3voc4pu7bw">Word Dictionary</a></span></p><p class="c7"><span class="c9 c11"><a class="c4" href="#id.lt2i6mn36xfi">GamePlay</a></span></p><p class="c7"><span class="c9 c11"><a class="c4" href="#id.7kk7771pb8hv">HTML &amp; CSS</a></span></p><p class="c7"><span class="c9 c11"><a class="c4" href="#id.4unbl2zb4gmp">Leaderboard &amp; Firebase Setup</a></span></p><p class="c7"><span class="c9 c11"><a class="c4" href="#id.saqyy1oxbkcj">End</a></span></p><p class="c7"><span class="c9 c11"><a class="c4" href="#id.a53pjrfbwm7m">UPDATE #1</a></span></p><a id="id.jettlvyfjohu"></a><h2 class="c3" id="h.4h5gpx81s8i9"><span class="c8">Game Breakdown</span><hr></h2><p class="c1"><span>Hello everybody, This month I wanted to make a word game (like </span><span class="c9"><a class="c4" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Boggle&amp;sa=D&amp;ust=1564512839593000">boggle</a></span><span class="c0">). </span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 425.00px; height: 399.00px;"><img alt="" src="images/image1.png" style="width: 425.00px; height: 399.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">There were a few problems I needed to solve first, like how to I know a word is valid? Something else I wanted to do was use firebase &amp; have an online leaderboard. I also wanted to try and use CSS with constructs built in HTML elements, since there has been a lot of talk about GUI on the forum.</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">The way I broke the game down was as follows.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- Generate 16 random letters (one for each tile)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- Determine all permutations of valid words<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- Have timer based gameplay (60 seconds)</span></p><p class="c1 c16"><span class="c0">- Check that given word is valid</span></p><p class="c1 c16"><span class="c0">- Save all correct words + Score (1 point for each letter)</span></p><p class="c1 c16"><span class="c0">- Upload score to leaderboard</span></p><p class="c1 c16"><span>&nbsp; </span></p><h2 class="c3 c10" id="h.wt2wael5sgb"><span class="c12 c8"></span></h2><a id="id.2g3voc4pu7bw"></a><h2 class="c3" id="h.7ftbruxtkobr"><span class="c8">Word Dictionary</span><hr></h2><p class="c1"><span>The first problem I needed to solve, was figuring out if a word is valid. After some research I encountered a few git projects that has some really nice </span><span class="c9"><a class="c4" href="https://www.google.com/url?q=https://github.com/dting/scrabble-word-finder&amp;sa=D&amp;ust=1564512839594000">examples</a></span><span>. I integrated the scrabble word finder into construct. The code is very clean. There is a very large array that contains all the valid words, this array was generated from &nbsp;</span><span class="c9"><a class="c4" href="https://www.google.com/url?q=http://www.puzzlers.org/pub/wordlists/ospd.txt&amp;sa=D&amp;ust=1564512839594000">http://www.puzzlers.org/pub/wordlists/ospd.txt</a></span><span class="c0">.</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 595.00px; height: 492.00px;"><img alt="" src="images/image19.png" style="width: 595.00px; height: 492.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span>This word list is loaded before any layouts load. The next step is given a set of letters pull out all the valids words. The way we iterate and parse this is using a </span><span class="c9"><a class="c4" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Trie&amp;sa=D&amp;ust=1564512839595000">Trie Tree Data Structure</a></span><span class="c0">. </span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 513.33px;"><img alt="" src="images/image26.png" style="width: 624.00px; height: 513.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">When we construct the word finder, we pass the word list array, we then create a new WordDictionary.</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 573.00px; height: 337.00px;"><img alt="" src="images/image13.png" style="width: 573.00px; height: 337.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">The Word Dictionary is genertates the Trie Tree. </span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 336.00px;"><img alt="" src="images/image5.png" style="width: 624.00px; height: 336.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span>Here is a great article explianing trei tree&rsquo;s </span><span class="c9"><a class="c4" href="https://www.google.com/url?q=https://medium.com/basecs/trying-to-understand-tries-3ec6bede0014&amp;sa=D&amp;ust=1564512839596000">https://medium.com/basecs/trying-to-understand-tries-3ec6bede0014</a></span><span class="c0">&nbsp; &nbsp;</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">In the project we include chance.js, chance is a PRNG, that has several functions that help with generate random content. We use chance to generate a set of random character</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 503.00px; height: 328.00px;"><img alt="" src="images/image21.png" style="width: 503.00px; height: 328.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">In order to have valid words we separate the generation of vowels and consonants. We ensure we always have at least 4 vowels out of 16 letters. This gives us a really good chance that we will have valid words.</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 185.33px;"><img alt="" src="images/image24.png" style="width: 624.00px; height: 185.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">We call this function during the start of the layout, here we generate the set of 16 random characters, we pass that character through the word finder which uses the trei tree to generate a set of valid words. We then assign each of those words a point value based on the length of the word. After that we execute the randomizeLetterTiles function and we pass the set of letters.</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span>&nbsp;</span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 193.33px;"><img alt="" src="images/image23.png" style="width: 624.00px; height: 193.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">That function iterates through all 16 tiles randomly, and sets the tile&rsquo;s letter.</span></p><p class="c1"><span class="c0">Now we have a game board, and a list of all the valid words that can be generated for all the tiles.</span></p><p class="c1 c2"><span class="c0"></span></p><a id="id.lt2i6mn36xfi"></a><h2 class="c3" id="h.r5k77vdvq2ek"><span>Game Play </span><hr></h2><p class="c1"><span class="c0">When the player selects a letter tile, we register the letter selected and appended to our current word. We then update the current word on the screen.</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 53.33px;"><img alt="" src="images/image16.png" style="width: 624.00px; height: 53.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">If the same letter is selected again, We then unregister &nbsp;that letter. We simple string.replace with the global flag to replace the first instance of the letter.</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 76.00px;"><img alt="" src="images/image22.png" style="width: 624.00px; height: 76.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span>Once the player thinks they have a valid word they can submit that </span><span class="c0">&nbsp;word, this process just check if the current word is part of the valid word list we generated at the start, if it is we then get the point value and pass the points to three other functions (well two)</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 70.67px;"><img alt="" src="images/image17.png" style="width: 624.00px; height: 70.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">Check points handle screen shake if it&rsquo;s not a valid word, and also handles creating the floating point text to indicate how many points the player just recieved.</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">The update score handles updating the score</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">And the updateUsedWords handles adding that word to a list of words that have already been used, this also writes those words to the screen, the usedWords list ensures no duplicate words can be used. </span></p><p class="c1 c2"><span class="c0"></span></p><a id="id.7kk7771pb8hv"></a><h2 class="c3" id="h.6akcyaxykjlb"><span>HTML </span><span>&amp; CSS</span><hr></h2><p class="c1"><span>So I wanted to experiment with constructs current HTML elements and the new loading of CSS files from the project directory. So a while back I read about </span><span class="c9"><a class="c4" href="https://www.google.com/url?q=https://nostalgic-css.github.io/NES.css/&amp;sa=D&amp;ust=1564512839599000">nes.css</a></span><span>&nbsp;on hacker news. It&rsquo;s pretty much an 8-bit style sheet that look really nice. I ran into a lot of pitfalls trying to get this work. Construct does not have a </span><span class="c9"><a class="c4" href="https://www.google.com/url?q=https://construct3.ideas.aha.io/ideas/C3-I-1051&amp;sa=D&amp;ust=1564512839599000">native way to add css classes</a></span><span class="c0">&nbsp;to elements. So I had to use javascript and the document API, Then i ran into issues trying to get the new worker mode to work. I need to do a bit of research, but I was short on time and gave up and just disabled worker mode. (I will come back to that at a later date). </span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 494.00px; height: 115.00px;"><img alt="" src="images/image7.png" style="width: 494.00px; height: 115.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">Another issue with this is the timing, In order to get this to work, this javascript has to be executed after a wait. The input and button did not show have this issue, because i was waiting for local storage before setting those css classes. But for the progress bar, i had to explicitly wait</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 112.00px;"><img alt="" src="images/image27.png" style="width: 624.00px; height: 112.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">Even with such a very trivial example of using HTML and CSS, this was the most frustrating aspect of the project. Hopefully scirra and improve on this work flow in the future. &nbsp;</span></p><a id="id.4unbl2zb4gmp"></a><h2 class="c3" id="h.cxjo24js07sk"><span class="c8">Leaderboard &amp; Firebase Setup</span><hr></h2><p class="c1"><span class="c8">Firebase is a great tool to use alongside construct. The leaderboard I am using is a free leaderboard service </span><span class="c9 c8"><a class="c4" href="https://www.google.com/url?q=http://dreamlo.com/&amp;sa=D&amp;ust=1564512839600000">http://dreamlo.com/</a></span><span class="c5">, It&rsquo;s a very easy service to get up and running. The only issue I encountered is calling this from the context of a construct game, is not very secure. Anybody can monitor the traffic and make the same requests to cheat the leaderboard (the tradeoff of using a free leaderboard service). </span></p><p class="c1 c2"><span class="c5"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 353.33px;"><img alt="" src="images/image12.png" style="width: 624.00px; height: 353.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c2"><span class="c5"></span></p><p class="c1"><span class="c5">Firebase to the rescue&hellip; &nbsp;so pretty much the way I solved this made it more secure is by using a firebase cloud function as the middleman to hide the private key used to interact with my leaderboard data.</span></p><p class="c1 c2"><span class="c5"></span></p><p class="c1"><span class="c8">Setting up Firebase cloud functions was very simple, you need to have node.js installed. You also need a firebase account, and a project setup. Setting this up is very simple. Go to </span><span class="c9 c8"><a class="c4" href="https://www.google.com/url?q=https://console.firebase.google.com&amp;sa=D&amp;ust=1564512839601000">firebase</a></span><span class="c5">&nbsp;and set up your account &amp; project. After you have setup your project &amp; installed node.js we need to install the firebase tools</span></p><p class="c1 c2"><span class="c5"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 237.00px; height: 20.00px;"><img alt="" src="images/image3.png" style="width: 237.00px; height: 20.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c2"><span class="c5"></span></p><p class="c1"><span class="c5">After you have installed the tool, we need to login to firebase</span></p><p class="c1 c2"><span class="c5"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 148.00px; height: 19.00px;"><img alt="" src="images/image20.png" style="width: 148.00px; height: 19.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c2"><span class="c5"></span></p><p class="c1"><span class="c5">Once you execute the login command follow the steps, after you have logged in, we are going to create a firebase functions project</span></p><p class="c1 c2"><span class="c5"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 207.00px; height: 21.00px;"><img alt="" src="images/image6.png" style="width: 207.00px; height: 21.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c2"><span class="c5"></span></p><p class="c1"><span class="c5">Follow all the steps to create a new firebase function project. From here we need to add some javascript code to execute our functions.</span></p><p class="c1 c2"><span class="c5"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 768.00px;"><img alt="" src="images/image9.png" style="width: 624.00px; height: 768.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c2"><span class="c5"></span></p><p class="c1 c2"><span class="c5"></span></p><p class="c1"><span class="c5">For the getScores function we need to import node-fetch api, to make request to dreamlo api. Calling this function invokes the dreamlo api and generates an array to the top ten scores. And returns the array.</span></p><p class="c1 c2"><span class="c5"></span></p><p class="c1"><span class="c5">We also whitelisted itch.io and construct preview with cors. </span></p><p class="c1 c2"><span class="c5"></span></p><p class="c1"><span class="c5">Now that we have our first firebase function we need to deploy the function with the firebase tools command line tool, this is very simple.</span></p><p class="c1 c2"><span class="c5"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 277.00px; height: 27.00px;"><img alt="" src="images/image15.png" style="width: 277.00px; height: 27.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c2"><span class="c5"></span></p><p class="c1"><span class="c5">After deploying the firebase function the cli we print out an http address that we can use to invoke our function</span></p><p class="c1 c2"><span class="c5"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 165.33px;"><img alt="" src="images/image8.png" style="width: 624.00px; height: 165.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c2"><span class="c13"></span></p><p class="c1"><span class="c5">After both the getScores and setScores functions have been deployed to firebase. I created a wrapper in C3 that will invoke these function to pull and push data to firebase/dreamlo. </span></p><p class="c1 c2"><span class="c5"></span></p><p class="c1 c2"><span class="c5"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 330.67px;"><img alt="" src="images/image2.png" style="width: 624.00px; height: 330.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c2"><span class="c5"></span></p><p class="c1"><span class="c5">The simple leaderboard class, pretty much interfaces with firebase, which interfaces with dreamlo. Just a word of warning, this is still not very secure event whitelisting functions in firebase, there are still ways to bypass this. Since i did not want users to have to login i have left this open, but normally you would want to uniquely identify your users and authenticate them. And only call the firebase cloud function from the context of a logged in user. </span></p><p class="c1"><span class="c5">&nbsp;</span></p><p class="c1"><span class="c5">So when our game load we use our simple leaderboard class to get the top 10 scores and use a callback to write them to a variable, which we then display once the call is done.</span></p><p class="c1 c2"><span class="c5"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 486.00px; height: 160.00px;"><img alt="" src="images/image4.png" style="width: 486.00px; height: 160.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c2"><span class="c5"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 48.00px;"><img alt="" src="images/image18.png" style="width: 624.00px; height: 48.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c2"><span class="c5"></span></p><p class="c1"><span class="c5">When time runs out we post the new score, the score is based on the current name so, 2 player with the same name will overwrite each other score, that is one of the limitations of using dreamlo. &nbsp; </span></p><p class="c1 c2"><span class="c5"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 214.67px;"><img alt="" src="images/image11.png" style="width: 624.00px; height: 214.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c2"><span class="c5"></span></p><a id="id.saqyy1oxbkcj"></a><h2 class="c3" id="h.1ebhba6bq88b"><span>End</span><hr></h2><p class="c1"><span class="c0">All in all, this game was really fun to make. I learned about a whole new data structure, and I learned about Firebase, and how easy it is to use. From the c3p file attached, I have removed the Url for firebase, so if you are going to try and run it you need to go in and add you our firebase credentials, and your own dreamlo credentials. If you guys have any suggestion of the next type of game you want me to try and make, post it in the comments on patreon or itch. </span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span>Also if you haven&rsquo;t already </span><span class="c11">follow me on : </span><span class="c9 c11"><a class="c4" href="https://www.google.com/url?q=https://twitter.com/piranha_305&amp;sa=D&amp;ust=1564512839605000">Twitter</a></span></p><p class="c1 c2"><span class="c5"></span></p><a id="id.a53pjrfbwm7m"></a><h2 class="c3" id="h.6adhnuf826ox"><span>UPDATE #1</span><hr></h2><p class="c1"><span class="c0">So after I deployed the game to itch.io, and people started playing the game I noticed, a long delay with the leaderboard system. After a bit of debugging The root cause was the dreamlo API it seems like it does not do so well when it&rsquo;s being hit by a few requests. During my testing it was fine because I was not hitting the service as often as I should.</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">So solution? I moved the handling of the leaderboard data completely to firebase and it seems to handle much faster. Now the upside is I did not have to update any of the game code because the API i am using stays pretty much the same. But instead of talking to dreamlo the firebase functions talk to the firestore.</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">I only had the change the implementation of the function.</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 570.00px; height: 314.00px;"><img alt="" src="images/image10.png" style="width: 570.00px; height: 314.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 520.00px; height: 280.00px;"><img alt="" src="images/image25.png" style="width: 520.00px; height: 280.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span class="c0">After updating both of these functions and having the function handle the authentication. Everything is now working much better.</span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span>There is one other thing I need to mention. And that&#39;s the CORS on itch.io. itch .io does not host the html games on the itch.io domain. So to get CORS to work properly I needed to whitelist </span><span class="c9"><a class="c4" href="https://www.google.com/url?q=https://v6p9d9t4.ssl.hwcdn.net&amp;sa=D&amp;ust=1564512839607000">https://v6p9d9t4.ssl.hwcdn.net</a></span></p><p class="c1 c2"><span class="c0"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 32.00px;"><img alt="" src="images/image14.png" style="width: 624.00px; height: 32.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1 c2"><span class="c5"></span></p><p class="c1 c2"><span class="c5"></span></p><p class="c1 c2"><span class="c5"></span></p><p class="c1 c2"><span class="c5"></span></p></body></html>